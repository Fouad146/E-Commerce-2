import{a as F,b as c,c as T,d as V,e as S,f,g as L,h as G,i as k,j as M}from"./chunk-NIOZYWYZ.js";import{a as y}from"./chunk-QQJH2RDI.js";import"./chunk-G5KA7DMQ.js";import{h}from"./chunk-W52NJFE2.js";import"./chunk-LFFRWUCI.js";import{Ab as b,Bb as u,Fb as l,Oa as s,W as E,Za as P,aa as g,ba as C,ca as w,cb as d,da as x,jb as _,nb as m,rb as i,sb as n,tb as p,wb as v}from"./chunk-YM5XIUHN.js";import"./chunk-EQDQRRRY.js";function q(t,o){t&1&&(i(0,"li",13),l(1,"email is required"),n())}function D(t,o){t&1&&(i(0,"li",13),l(1,"email not valid"),n())}function H(t,o){if(t&1&&(i(0,"div",7),w(),i(1,"svg",9),p(2,"path",10),n(),x(),i(3,"span",11),l(4,"Danger"),n(),i(5,"div")(6,"ul",12),d(7,q,2,0,"li",13)(8,D,2,0,"li",13),n()()()),t&2){let e,a=u(2);s(7),m((e=a.verifyEmail.get("email"))!=null&&e.getError("required")?7:(e=a.verifyEmail.get("email"))!=null&&e.getError("email")?8:-1)}}function z(t,o){t&1&&(i(0,"span"),p(1,"i",14),n())}function A(t,o){t&1&&l(0,"Verify Email")}function Z(t,o){if(t&1){let e=v();i(0,"form",3),b("ngSubmit",function(){g(e);let r=u();return C(r.verifyEmailSub())}),i(1,"div",4)(2,"label",5),l(3,"Email"),n(),p(4,"input",6),n(),d(5,H,9,1,"div",7),i(6,"button",8),d(7,z,2,0,"span")(8,A,1,0),n()()}if(t&2){let e,a=u();_("formGroup",a.verifyEmail),s(5),m((e=a.verifyEmail.get("email"))!=null&&e.errors&&((e=a.verifyEmail.get("email"))!=null&&e.touched)?5:-1),s(),_("disabled",a.verifyEmail.invalid)("disabled",a.isLoading),s(),m(a.isLoading?7:8)}}function I(t,o){t&1&&(i(0,"span"),p(1,"i",14),n())}function R(t,o){t&1&&l(0,"Verify Code")}function $(t,o){if(t&1){let e=v();i(0,"form",3),b("ngSubmit",function(){g(e);let r=u();return C(r.verifyCodeSub())}),i(1,"div",4)(2,"label",15),l(3,"Enter Code"),n(),p(4,"input",16),n(),i(5,"button",8),d(6,I,2,0,"span")(7,R,1,0),n()()}if(t&2){let e=u();_("formGroup",e.verifyCode),s(5),_("disabled",e.verifyCode.invalid)("disabled",e.isLoading),s(),m(e.isLoading?6:7)}}function j(t,o){t&1&&(i(0,"li",13),l(1,"email is required"),n())}function B(t,o){t&1&&(i(0,"li",13),l(1,"email not valid"),n())}function O(t,o){if(t&1&&(i(0,"div",7),w(),i(1,"svg",9),p(2,"path",10),n(),x(),i(3,"span",11),l(4,"Danger"),n(),i(5,"div")(6,"ul",12),d(7,j,2,0,"li",13)(8,B,2,0,"li",13),n()()()),t&2){let e,a=u(2);s(7),m((e=a.resetPassword.get("email"))!=null&&e.getError("required")?7:(e=a.resetPassword.get("email"))!=null&&e.getError("email")?8:-1)}}function U(t,o){t&1&&(i(0,"li",13),l(1,"password is required"),n())}function J(t,o){t&1&&(i(0,"li",13),l(1,"minLength is 6 caracters"),n())}function K(t,o){t&1&&(i(0,"li",13),l(1,"you must start with capital caracter "),n())}function Q(t,o){if(t&1&&(i(0,"div",7),w(),i(1,"svg",9),p(2,"path",10),n(),x(),i(3,"span",11),l(4,"Danger"),n(),i(5,"div")(6,"ul",12),d(7,U,2,0,"li",13)(8,J,2,0,"li",13)(9,K,2,0,"li",13),n()()()),t&2){let e,a=u(2);s(7),m((e=a.resetPassword.get("newPassword"))!=null&&e.getError("required")?7:(e=a.resetPassword.get("newPassword"))!=null&&e.getError("minlength")?8:(e=a.resetPassword.get("newPassword"))!=null&&e.getError("pattern")?9:-1)}}function W(t,o){t&1&&(i(0,"span"),p(1,"i",14),n())}function X(t,o){t&1&&l(0,"Verify Email")}function Y(t,o){if(t&1){let e=v();i(0,"form",3),b("ngSubmit",function(){g(e);let r=u();return C(r.resetPasswordSub())}),i(1,"div",4)(2,"label",5),l(3,"Email"),n(),p(4,"input",17),d(5,O,9,1,"div",7),n(),i(6,"div",4)(7,"label",18),l(8,"new password"),n(),p(9,"input",19),d(10,Q,10,1,"div",7),n(),i(11,"button",8),d(12,W,2,0,"span")(13,X,1,0),n()()}if(t&2){let e,a,r=u();_("formGroup",r.resetPassword),s(5),m((e=r.resetPassword.get("email"))!=null&&e.errors&&((e=r.resetPassword.get("email"))!=null&&e.touched)?5:-1),s(5),m((a=r.resetPassword.get("password"))!=null&&a.errors&&((a=r.resetPassword.get("password"))!=null&&a.touched)?10:-1),s(),_("disabled",r.resetPassword.invalid)("disabled",r.isLoading),s(),m(r.isLoading?12:13)}}var N=class t{isLoading=!1;authService=E(y);router=E(h);step=1;verifyEmail=new S({email:new f(null,[c.required,c.email])});verifyCode=new S({resetCode:new f(null,[c.required,c.pattern(/^[0-9]{5,}$/)])});resetPassword=new S({email:new f(null,[c.required,c.email]),newPassword:new f(null,[c.required,c.pattern(/^[A-Z]\w{7,}$/)])});verifyEmailSub(){this.isLoading=!0;let o=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(o),this.authService.setEmailVerify(this.verifyEmail.value).subscribe({next:e=>{console.log(e),e.statusMsg==="success"&&(this.step=2,this.isLoading=!1)},error:e=>{console.log(e)}})}verifyCodeSub(){this.isLoading=!0,this.authService.setCodeVerify(this.verifyCode.value).subscribe({next:o=>{console.log(o),o.status==="Success"&&(this.step=3,this.isLoading=!1)},error:o=>{console.log(o),this.isLoading=!1}})}resetPasswordSub(){this.isLoading=!0,this.authService.resetPass(this.resetPassword.value).subscribe({next:o=>{console.log(o),localStorage.setItem("userToken",o.token),this.authService.saveUserData(),this.router.navigate(["/home"]),this.isLoading=!1},error:o=>{this.isLoading=!1,console.log(o)}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-forget-password"]],decls:6,vars:1,consts:[[1,"container","m-auto","text-center","w-1/2"],[1,"text-2xl","font-bold","italic"],["action","",1,"container","bg-slate-200","rounded-lg","p-5","mt-3",3,"formGroup"],["action","",1,"container","bg-slate-200","rounded-lg","p-5","mt-3",3,"ngSubmit","formGroup"],[1,"my-3"],["for","email",1,"block","mb-2","text-sm","font-medium","text-start","capitalize"],["formControlName","email","type","email","id","email",1,"block","w-full","p-2","rounded-lg","text-base"],["role","alert",1,"flex","p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50"],["type","submit",1,"btn-main","mt-3",3,"disabled"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3","mt-[2px]"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"mt-1.5","list-disc","list-inside"],[1,"capitalize"],[1,"fa-spin","fas","fa-spinner","fa-1x"],["for","code",1,"block","mb-2","text-sm","font-medium","text-start","capitalize"],["formControlName","resetCode","type","text","id","code",1,"block","w-full","p-2","rounded-lg","text-base"],["readonly","","formControlName","email","type","email","id","email",1,"block","w-full","p-2","rounded-lg","text-base"],["for","password",1,"block","mb-2","text-sm","font-medium","text-start","capitalize"],["formControlName","newPassword","type","password","id","password",1,"block","w-full","p-2","rounded-lg","text-base"]],template:function(e,a){e&1&&(i(0,"section",0)(1,"h1",1),l(2," Forget Password"),n(),d(3,Z,9,5,"form",2)(4,$,8,4,"form",2)(5,Y,14,6,"form",2),n()),e&2&&(s(3),m(a.step==1?3:a.step==2?4:a.step==3?5:-1))},dependencies:[M,L,F,T,V,G,k],styles:[".disabled[_ngcontent-%COMP%]{background:#464545}"]})};export{N as ForgetPasswordComponent};
