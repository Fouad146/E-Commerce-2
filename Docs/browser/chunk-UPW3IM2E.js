import{a as h}from"./chunk-POJF7H73.js";import{a as I}from"./chunk-G5KA7DMQ.js";import{f as g}from"./chunk-W52NJFE2.js";import{v}from"./chunk-LFFRWUCI.js";import{Fb as s,Hb as l,Oa as n,Q as c,V as p,W as a,Za as m,pb as f,qb as u,rb as o,sb as i}from"./chunk-YM5XIUHN.js";import"./chunk-EQDQRRRY.js";var d=class r{constructor(e){this.httpClient=e}myToken=localStorage.getItem("userToken");getAllOrders(e){return this.httpClient.get("https://ecommerce.routemisr.com"+`/api/v1/orders/user/${e}`)}static \u0275fac=function(t){return new(t||r)(p(v))};static \u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"})};var y=(r,e)=>e.id;function C(r,e){if(r&1&&(o(0,"div",4)(1,"h3"),s(2),i(),o(3,"p"),s(4),i(),o(5,"p"),s(6),i()()),r&2){let t=e.$implicit;n(2),l("Product ID: ",t.id,""),n(2),l("Product paid at: ",t.paidAt,""),n(2),l("Quantity: ",t.totalOrderPrice," EPG")}}var b=class r{finorderService=a(d);activatedRoute=a(g);orderService=a(h);allOrdersUser=[];userId=null;ngOnInit(){this.getUserId()}getUserId(){let e=localStorage.getItem("userToken");if(e){let t=I(e);console.log("Decoded Token:",t),this.userId=t.id||t.userId,this.userId?this.getOrders():console.error("User ID not found in token")}else console.log("No token found in localStorage")}getOrders(){if(!this.userId){console.error("Cannot fetch orders, User ID is missing");return}this.finorderService.getAllOrders(this.userId).subscribe({next:e=>{console.log("Orders:",e),this.allOrdersUser=e},error:e=>{console.error("Error fetching orders:",e)}})}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=m({type:r,selectors:[["app-allorders"]],decls:8,vars:0,consts:[[1,"h-screen"],[1,"mt-3","bg-gray-100","border","rounded-lg","p-4","shadow-xl","w-[75%]","mx-auto"],[1,"header","pb-3","text-center"],[1,"font-light","capitalize","text-2xl"],[1,"data","p-2","border-b"]],template:function(t,x){t&1&&(o(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),s(4,"All Orders:"),i()(),o(5,"div"),f(6,C,7,3,"div",4,y),i()()()),t&2&&(n(6),u(x.allOrdersUser))},encapsulation:2})};export{b as AllordersComponent};
