import './polyfills.server.mjs';
import{a as q,b as p,c as L,d as P,e as k,f as _,g as G,h as M,i as N,j as D}from"./chunk-CN2OVIYF.mjs";import{a as y}from"./chunk-LGKWTPZD.mjs";import"./chunk-QZLY374Y.mjs";import{l as T}from"./chunk-FD4TD4B7.mjs";import"./chunk-6DNVIJ65.mjs";import{Fb as R,Gb as u,Kb as o,Mb as w,Ra as a,W as h,ab as F,da as c,ea as g,fb as s,ob as S,sb as m,wb as t,xb as i,yb as d}from"./chunk-Z2XPE5LZ.mjs";import"./chunk-X2SEQXRR.mjs";function V(e,r){e&1&&(t(0,"li",24),o(1,"name is required"),i())}function A(e,r){e&1&&(t(0,"li",24),o(1,"min length is: 3"),i())}function z(e,r){e&1&&(t(0,"li",24),o(1,"max length is: 20"),i())}function Z(e,r){if(e&1&&(t(0,"div",8),c(),t(1,"svg",20),d(2,"path",21),i(),g(),t(3,"span",22),o(4,"Danger"),i(),t(5,"div")(6,"ul",23),s(7,V,2,0,"li",24)(8,A,2,0,"li",24)(9,z,2,0,"li",24),i()()()),e&2){let n,l=u();a(7),m((n=l.registerForm.get("name"))!=null&&n.getError("required")?7:(n=l.registerForm.get("name"))!=null&&n.getError("minlength")?8:(n=l.registerForm.get("name"))!=null&&n.getError("maxlength")?9:-1)}}function I(e,r){e&1&&(t(0,"li",24),o(1,"email is required"),i())}function $(e,r){e&1&&(t(0,"li",24),o(1,"email not valid"),i())}function j(e,r){if(e&1&&(t(0,"div",8),c(),t(1,"svg",20),d(2,"path",21),i(),g(),t(3,"span",22),o(4,"Danger"),i(),t(5,"div")(6,"ul",25),s(7,I,2,0,"li",24)(8,$,2,0,"li",24),i()()()),e&2){let n,l=u();a(7),m((n=l.registerForm.get("email"))!=null&&n.getError("required")?7:(n=l.registerForm.get("email"))!=null&&n.getError("email")?8:-1)}}function B(e,r){e&1&&(t(0,"li",24),o(1,"password is required"),i())}function J(e,r){e&1&&(t(0,"li",24),o(1,"minLength is 6 caracters"),i())}function K(e,r){e&1&&(t(0,"li",24),o(1,"you must start with capital caracter "),i())}function O(e,r){if(e&1&&(t(0,"div",8),c(),t(1,"svg",20),d(2,"path",21),i(),g(),t(3,"span",22),o(4,"Danger"),i(),t(5,"div")(6,"ul",25),s(7,B,2,0,"li",24)(8,J,2,0,"li",24)(9,K,2,0,"li",24),i()()()),e&2){let n,l=u();a(7),m((n=l.registerForm.get("password"))!=null&&n.getError("required")?7:(n=l.registerForm.get("password"))!=null&&n.getError("minlength")?8:(n=l.registerForm.get("password"))!=null&&n.getError("pattern")?9:-1)}}function Q(e,r){e&1&&(t(0,"li",24),o(1,"password not matched"),i())}function U(e,r){if(e&1&&(t(0,"div",8),c(),t(1,"svg",20),d(2,"path",21),i(),g(),t(3,"span",22),o(4,"Danger"),i(),t(5,"div")(6,"ul",25),s(7,Q,2,0,"li",24),i()()()),e&2){let n,l=u();a(7),m((n=l.registerForm.get("rePassword"))!=null&&n.getError("required")?7:-1)}}function W(e,r){e&1&&(t(0,"li",24),o(1,"password is required"),i())}function X(e,r){if(e&1&&(t(0,"div",8),c(),t(1,"svg",20),d(2,"path",21),i(),g(),t(3,"span",22),o(4,"Danger"),i(),t(5,"div")(6,"ul",25),s(7,W,2,0,"li",24),i()()()),e&2){let n,l=u();a(7),m((n=l.registerForm.get("rePassword"))!=null&&n.getError("required")?7:-1)}}function Y(e,r){e&1&&(t(0,"li",24),o(1,"phone is required"),i())}function ee(e,r){e&1&&(t(0,"li",24),o(1,"this phone un valid "),i())}function te(e,r){if(e&1&&(t(0,"div",8),c(),t(1,"svg",20),d(2,"path",21),i(),g(),t(3,"span",22),o(4,"Danger"),i(),t(5,"div")(6,"ul",25),s(7,Y,2,0,"li",24)(8,ee,2,0,"li",24),i()()()),e&2){let n,l=u();a(7),m((n=l.registerForm.get("phone"))!=null&&n.getError("required")?7:(n=l.registerForm.get("phone"))!=null&&n.getError("pattern")?8:-1)}}function ie(e,r){e&1&&(t(0,"span"),d(1,"i",26),i())}function ne(e,r){e&1&&o(0,"sign up")}function le(e,r){if(e&1&&(t(0,"p",18),o(1),i()),e&2){let n=u();a(),w(" ",n.msgError," ")}}function re(e,r){if(e&1&&(t(0,"p",19),o(1),i()),e&2){let n=u();a(),w(" ",n.msgsuccess," ")}}var H=class e{authService=h(y);router=h(T);isLoading=!1;msgError="";msgsuccess="";registerForm=new k({name:new _(null,[p.required,p.minLength(3),p.maxLength(20)]),email:new _(null,[p.required,p.email]),password:new _(null,[p.required,p.minLength(6),p.pattern(/^[A-Z]\w{7,}$/)]),rePassword:new _(null,[p.required]),phone:new _(null,[p.required,p.pattern(/^01[0125][0-9]{8}$/)])},{validators:this.confirmPassword});confirmPassword(r){let n=r.get("password")?.value,l=r.get("rePassword")?.value;return n===l?null:{mismatch:!0}}submitForm(){this.registerForm.valid?(this.isLoading=!0,console.log(this.registerForm),this.authService.sendRegesterForm(this.registerForm.value).subscribe({next:r=>{console.log(r),r.message=="success"&&(this.msgsuccess=r.message,setTimeout(()=>{this.router.navigate(["/login"])},1e3)),this.isLoading=!1},error:r=>{console.log(r),this.msgError=r.error.message,this.isLoading=!1}})):this.registerForm.markAllAsTouched()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=F({type:e,selectors:[["app-register"]],decls:37,vars:10,consts:[["id","main-section"],[1,"container","m-auto","text-center","w-1/2"],[1,"text-2xl","font-bold","italic"],[1,"container","bg-slate-200","rounded-lg","p-5","mt-3"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"block","mb-2","text-sm","font-medium","text-start","capitalize"],["formControlName","name","type","text","id","name",1,"block","w-full","p-2","rounded-lg","text-base"],["role","alert",1,"flex","p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50"],["for","email",1,"block","mb-2","text-sm","font-medium","text-start","capitalize"],["formControlName","email","type","email","id","email",1,"block","w-full","p-2","rounded-lg","text-base"],["for","password",1,"block","mb-2","text-sm","font-medium","text-start","capitalize"],["formControlName","password","type","password","id","password",1,"block","w-full","p-2","rounded-lg","text-base"],["for","rePassword",1,"block","mb-2","text-sm","font-medium","text-start","capitalize"],["formControlName","rePassword","type","password","id","rePassword",1,"block","w-full","p-2","rounded-lg","text-base"],["for","phone",1,"block","mb-2","text-sm","font-medium","text-start","capitalize"],["formControlName","phone","type","tel","id","phone",1,"block","w-full","p-2","rounded-lg","text-base"],["type","submit",1,"btn-main",3,"disabled"],[1,"bg-red-400","text-white","px-2","py-4","border"],[1,"bg-green-400","text-white","px-2","py-4","border"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3","mt-[2px]"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"mt-1.5","text-start","list-disc","list-inside"],[1,"capitalize"],[1,"mt-1.5","list-disc","list-inside"],[1,"fa-spin","fas","fa-spinner","fa-1x"]],template:function(n,l){if(n&1&&(t(0,"section",0)(1,"div",1)(2,"h2",2),o(3,"Register now"),i(),t(4,"div",3)(5,"form",4),R("ngSubmit",function(){return l.submitForm()}),t(6,"div",5)(7,"label",6),o(8,"name"),i(),d(9,"input",7),s(10,Z,10,1,"div",8),i(),t(11,"div",5)(12,"label",9),o(13,"email"),i(),d(14,"input",10),s(15,j,9,1,"div",8),i(),t(16,"div",5)(17,"label",11),o(18,"password"),i(),d(19,"input",12),s(20,O,10,1,"div",8),i(),t(21,"div",5)(22,"label",13),o(23,"rePassword"),i(),d(24,"input",14),s(25,U,8,1,"div",8)(26,X,8,1,"div",8),i(),t(27,"div",5)(28,"label",15),o(29,"phone"),i(),d(30,"input",16),s(31,te,9,1,"div",8),i(),t(32,"button",17),s(33,ie,2,0,"span")(34,ne,1,0),i(),s(35,le,2,1,"p",18)(36,re,2,1,"p",19),i()()()()),n&2){let f,x,C,b,v,E;a(5),S("formGroup",l.registerForm),a(5),m((f=l.registerForm.get("name"))!=null&&f.errors&&((f=l.registerForm.get("name"))!=null&&f.touched)?10:-1),a(5),m((x=l.registerForm.get("email"))!=null&&x.errors&&((x=l.registerForm.get("email"))!=null&&x.touched)?15:-1),a(5),m((C=l.registerForm.get("password"))!=null&&C.errors&&((C=l.registerForm.get("password"))!=null&&C.touched)?20:-1),a(5),m(l.registerForm.getError("mismatch")&&((b=l.registerForm.get("rePassword"))!=null&&b.touched)?25:-1),a(),m((v=l.registerForm.get("rePassword"))!=null&&v.errors&&((v=l.registerForm.get("rePassword"))!=null&&v.touched)?26:-1),a(5),m((E=l.registerForm.get("phone"))!=null&&E.errors&&((E=l.registerForm.get("phone"))!=null&&E.touched)?31:-1),a(),S("disabled",l.isLoading),a(),m(l.isLoading?33:34),a(2),m(l.msgError?35:l.msgsuccess?36:-1)}},dependencies:[D,G,q,L,P,M,N],encapsulation:2})};export{H as RegisterComponent};
