import './polyfills.server.mjs';
import{a as q}from"./chunk-TABWPTR2.mjs";import{a as O,b as s,c as y,d as E,e as F,f as v,g as w,h as T,i as M,j as N}from"./chunk-CN2OVIYF.mjs";import{i as S}from"./chunk-FD4TD4B7.mjs";import"./chunk-6DNVIJ65.mjs";import{Fb as b,Gb as x,Kb as r,Ra as a,W as C,ab as _,da as g,ea as f,fb as m,ob as k,sb as c,wb as e,xb as t,yb as d}from"./chunk-Z2XPE5LZ.mjs";import"./chunk-X2SEQXRR.mjs";function I(i,n){i&1&&(e(0,"li",16),r(1,"details is required"),t())}function D(i,n){if(i&1&&(e(0,"div",6),g(),e(1,"svg",12),d(2,"path",13),t(),f(),e(3,"span",14),r(4,"Danger"),t(),e(5,"div")(6,"ul",15),m(7,I,2,0,"li",16),t()()()),i&2){let o,l=x();a(7),c((o=l.checkOutForm.get("details"))!=null&&o.getError("required")?7:-1)}}function z(i,n){i&1&&(e(0,"li",16),r(1,"phone is required"),t())}function V(i,n){if(i&1&&(e(0,"div",6),g(),e(1,"svg",12),d(2,"path",13),t(),f(),e(3,"span",14),r(4,"Danger"),t(),e(5,"div")(6,"ul",15),m(7,z,2,0,"li",16),t()()()),i&2){let o,l=x();a(7),c((o=l.checkOutForm.get("phone"))!=null&&o.getError("required")?7:-1)}}function A(i,n){i&1&&(e(0,"li",16),r(1,"city is required"),t())}function H(i,n){if(i&1&&(e(0,"div",6),g(),e(1,"svg",12),d(2,"path",13),t(),f(),e(3,"span",14),r(4,"Danger"),t(),e(5,"div")(6,"ul",15),m(7,A,2,0,"li",16),t()()()),i&2){let o,l=x();a(7),c((o=l.checkOutForm.get("city"))!=null&&o.getError("required")?7:-1)}}var G=class i{activatedRoute=C(S);orderService=C(q);cartId="";ngOnInit(){this.getCartId()}getCartId(){this.activatedRoute.paramMap.subscribe(n=>{console.log(n.get("id")),this.cartId=n.get("id")})}checkOutForm=new F({details:new v(null,[s.required]),phone:new v(null,[s.required,s.pattern(/^01[0125][0-9]{8}$/)]),city:new v(null,[s.required])});subForm(){this.checkOutForm.valid?this.orderService.checkOut(this.cartId,this.checkOutForm.value).subscribe({next:n=>{console.log(n),n.status=="success"&&open(n.session.url,"_self")},error:n=>{console.log(n)}}):this.checkOutForm.markAllAsTouched()}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=_({type:i,selectors:[["app-chick-out"]],decls:21,vars:4,consts:[[1,"bg-gray-100","border","rounded-lg","p-4","my-5","shadow-xl","w-[75%]","mx-auto"],[1,"text-center","text-green-600","text-3xl","capitalize"],["action","",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","details",1,"block","mb-2","text-sm","font-medium","text-start","capitalize"],["formControlName","details","type","text","id","details",1,"block","w-full","p-2","rounded-lg","text-base"],["role","alert",1,"flex","p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50"],["for","phone",1,"block","mb-2","text-sm","font-medium","text-start","capitalize"],["formControlName","phone","type","tel","id","phone",1,"block","w-full","p-2","rounded-lg","text-base"],["for","city",1,"block","mb-2","text-sm","font-medium","text-start","capitalize"],["formControlName","city","type","text","id","city",1,"block","w-full","p-2","rounded-lg","text-base"],["type","submit",1,"ms-auto","block","bg-green-600","text-white","rounded-lg","px-5","py-1","h-10","hover:bg-green-800","align-self-end","capitalize"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3","mt-[2px]"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"mt-1.5","text-start","list-disc","list-inside"],[1,"capitalize"]],template:function(o,l){if(o&1&&(e(0,"section",0)(1,"h1",1),r(2,"check out"),t(),e(3,"form",2),b("ngSubmit",function(){return l.subForm()}),e(4,"div",3)(5,"label",4),r(6,"details"),t(),d(7,"input",5),m(8,D,8,1,"div",6),t(),e(9,"div",3)(10,"label",7),r(11,"phone"),t(),d(12,"input",8),m(13,V,8,1,"div",6),t(),e(14,"div",3)(15,"label",9),r(16,"city"),t(),d(17,"input",10),m(18,H,8,1,"div",6),t(),e(19,"button",11),r(20,"online payment"),t()()()),o&2){let u,p,h;a(3),k("formGroup",l.checkOutForm),a(5),c((u=l.checkOutForm.get("details"))!=null&&u.errors&&((u=l.checkOutForm.get("details"))!=null&&u.touched)?8:-1),a(5),c((p=l.checkOutForm.get("phone"))!=null&&p.errors&&((p=l.checkOutForm.get("phone"))!=null&&p.touched)?13:-1),a(5),c((h=l.checkOutForm.get("city"))!=null&&h.errors&&((h=l.checkOutForm.get("city"))!=null&&h.touched)?18:-1)}},dependencies:[N,w,O,y,E,T,M],encapsulation:2})};export{G as ChickOutComponent};
